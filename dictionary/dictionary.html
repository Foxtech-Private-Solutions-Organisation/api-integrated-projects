<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Dictionary</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#7c3aed;
      --muted:#94a3b8;
      --glass: rgba(255,255,255,0.03);
      --radius:12px;
      color-scheme: dark;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#071029 0%, #081026 100%);
      color:#e6eef8;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .app {
      width:100%;
      max-width:880px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:20px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.7);
      backdrop-filter: blur(6px);
    }

    header {
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    h1{font-size:20px;margin:0}
    .searchWrap {
      display:flex;
      gap:8px;
      width:100%;
    }
    input[type="search"]{
      flex:1;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:var(--glass);
      color:inherit;
      font-size:15px;
      outline:none;
    }
    button {
      padding:10px 14px;
      border-radius:10px;
      border:none;
      background:var(--accent);
      color:white;
      font-weight:600;
      cursor:pointer;
    }
    button.secondary{
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--muted);
      font-weight:600;
    }

    .wordTitle{ font-size:22px; font-weight:700; }
    .phonetic{ color:var(--muted); font-size:14px; }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:16px;
      margin-bottom:12px;
      border:1px solid rgba(255,255,255,0.02);
    }

    .part { font-weight:700; margin-bottom:6px; color:#dbeafe; }
    ul{ margin:8px 0 0 18px; padding:0; color: #cfe6ff; }
    li{ margin-bottom:6px; line-height:1.4; font-size:15px; }

    .small{ font-size:13px; color:var(--muted) }

    .audioBtn { background:transparent; border:1px solid rgba(255,255,255,0.06); padding:6px 10px; border-radius:8px; color:var(--muted); cursor:pointer;}
    .audioBtn:disabled{ opacity:0.5; cursor:not-allowed; }

    /* New styling for synonyms & antonyms */
    .synonym { color:#10b981; cursor:pointer; font-weight:600; }
    .antonym { color:#ef4444; cursor:pointer; font-weight:600; }

    .footer { text-align:center; margin-top:8px; color:var(--muted); font-size:13px; }

    @media (max-width:520px){
      header{ flex-direction:column; align-items:stretch; gap:10px;}
    }
  </style>
</head>
<body>
  <main class="app" role="main">
    <header>
      <div>
        <h1>Simple Dictionary</h1>
        <div class="small">Powered by Free Dictionary API (dictionaryapi.dev)</div>
      </div>
      <div class="controls" style="margin-left:auto">
        <button id="clearBtn" class="secondary" title="Clear">Clear</button>
      </div>
    </header>

    <div class="searchWrap">
      <input id="query" type="search" placeholder="Type a word and press Enter or Search" aria-label="Word to search">
      <button id="searchBtn">Search</button>
    </div>

    <div id="output" aria-live="polite" style="margin-top:14px"></div>

    <div class="footer">Example: type <em>example</em>, <em>happiness</em>, or <em>serendipity</em></div>
  </main>

  <script>
    const API_BASE = 'https://api.dictionaryapi.dev/api/v2/entries/en/';
    const q = document.getElementById('query');
    const searchBtn = document.getElementById('searchBtn');
    const output = document.getElementById('output');
    const clearBtn = document.getElementById('clearBtn');

    function showLoading() {
      output.innerHTML = `<div class="card small">‚è≥ Loading‚Ä¶</div>`;
    }
    function showError(msg){
      output.innerHTML = `<div class="card"><div class="small">‚ö†Ô∏è ${msg}</div></div>`;
    }

    function renderData(data){
      if(!Array.isArray(data) || data.length === 0){
        showError('No definition found.');
        return;
      }
      const entry = data[0];
      const word = entry.word || '';
      const phonetics = (entry.phonetics || []).find(p => p.text) || {};
      const audioObj = (entry.phonetics || []).find(p => p.audio) || {};
      const meanings = entry.meanings || [];

      let html = `
        <div class="card">
          <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
            <div>
              <div class="wordTitle">${escapeHtml(word)}</div>
              <div class="phonetic">${escapeHtml(phonetics.text || '')}</div>
            </div>
            <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
              <button id="playAudio" class="audioBtn" ${audioObj.audio ? '' : 'disabled'} title="Play pronunciation">üîä</button>
              <div class="small">Source: dictionaryapi.dev</div>
            </div>
          </div>
        </div>
      `;

      meanings.forEach(m => {
        html += `<div class="card meaning">
          <div class="part">${escapeHtml(m.partOfSpeech || '')}</div>
          <ul>`;
        (m.definitions || []).forEach(def => {
          html += `<li><strong>Definition:</strong> ${escapeHtml(def.definition || '')}`;

          if(def.example) 
            html += `<div class="small" style="margin-top:6px"><em>Example:</em> ${escapeHtml(def.example)}</div>`;

          if(def.synonyms && def.synonyms.length) {
            html += `<div class="small" style="margin-top:6px"><em>Synonyms:</em> `;
            def.synonyms.forEach(syn => {
              html += `<span class="synonym" onclick="lookup('${syn}')">${escapeHtml(syn)}</span>, `;
            });
            html = html.replace(/, $/, ''); // remove last comma
            html += `</div>`;
          }

          if(def.antonyms && def.antonyms.length) {
            html += `<div class="small" style="margin-top:6px"><em>Antonyms:</em> `;
            def.antonyms.forEach(ant => {
              html += `<span class="antonym" onclick="lookup('${ant}')">${escapeHtml(ant)}</span>, `;
            });
            html = html.replace(/, $/, '');
            html += `</div>`;
          }

          html += `</li>`;
        });
        html += `</ul></div>`;
      });

      output.innerHTML = html;

      const playBtn = document.getElementById('playAudio');
      if(playBtn && audioObj.audio){
        playBtn.onclick = () => {
          const audio = new Audio(audioObj.audio);
          audio.play().catch(()=> alert('Audio not available'));
        };
      }
    }

    async function lookup(word){
      const w = (word||'').trim();
      if(!w) { showError('Please type a word to search.'); return; }
      showLoading();
      try {
        const res = await fetch(API_BASE + encodeURIComponent(w));
        if (res.status === 404) {
          showError('No definition found for "' + escapeHtml(w) + '".');
          return;
        }
        if (!res.ok) {
          showError('Error: ' + res.status);
          return;
        }
        const data = await res.json();
        renderData(data);
      } catch(err){
        showError('Network error. Please try again.');
        console.error(err);
      }
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'", '&#039;');
    }

    searchBtn.addEventListener('click', () => lookup(q.value));
    q.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') lookup(q.value);
    });
    clearBtn.addEventListener('click', () => {
      q.value = '';
      output.innerHTML = '';
      q.focus();
    });

    // Default word
    lookup('example');
  </script>
</body>
</html>
